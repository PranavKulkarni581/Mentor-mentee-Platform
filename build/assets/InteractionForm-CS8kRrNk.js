import{r as l,j as e,c as J,P as Z,a as I,u as W,b as L,d as q,e as ee,C as te,f as se,g as re,h as ae,i as ne,L as i,I as k,B as ie,k as oe,p as ce,l as le,t as A}from"./index-Pm_8r_rA.js";import{u as de,a as ue,C as me,S as D,b as _,c as G,d as B,e as N,T as S}from"./select-8aGA95k4.js";import{R as E,a as R}from"./radio-group-Cb3aPZDp.js";import{S as he}from"./send-B8wXWvm2.js";var F="Checkbox",[xe]=J(F),[pe,w]=xe(F);function ge(n){const{__scopeCheckbox:d,checked:u,children:s,defaultChecked:c,disabled:r,form:p,name:g,onCheckedChange:h,required:f,value:t="on",internal_do_not_use_render:a}=n,[o,b]=W({prop:u,defaultProp:c??!1,onChange:h,caller:F}),[j,C]=l.useState(null),[y,m]=l.useState(null),x=l.useRef(!1),P=j?!!p||!!j.closest("form"):!0,T={checked:o,disabled:r,setChecked:b,control:j,setControl:C,name:g,form:p,value:t,hasConsumerStoppedPropagationRef:x,required:f,defaultChecked:v(c)?!1:c,isFormControl:P,bubbleInput:y,setBubbleInput:m};return e.jsx(pe,{scope:d,...T,children:be(a)?a(T):s})}var M="CheckboxTrigger",O=l.forwardRef(({__scopeCheckbox:n,onKeyDown:d,onClick:u,...s},c)=>{const{control:r,value:p,disabled:g,checked:h,required:f,setControl:t,setChecked:a,hasConsumerStoppedPropagationRef:o,isFormControl:b,bubbleInput:j}=w(M,n),C=L(c,t),y=l.useRef(h);return l.useEffect(()=>{const m=r?.form;if(m){const x=()=>a(y.current);return m.addEventListener("reset",x),()=>m.removeEventListener("reset",x)}},[r,a]),e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":v(h)?"mixed":h,"aria-required":f,"data-state":K(h),"data-disabled":g?"":void 0,disabled:g,value:p,...s,ref:C,onKeyDown:q(d,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:q(u,m=>{a(x=>v(x)?!0:!x),j&&b&&(o.current=m.isPropagationStopped(),o.current||m.stopPropagation())})})});O.displayName=M;var $=l.forwardRef((n,d)=>{const{__scopeCheckbox:u,name:s,checked:c,defaultChecked:r,required:p,disabled:g,value:h,onCheckedChange:f,form:t,...a}=n;return e.jsx(ge,{__scopeCheckbox:u,checked:c,defaultChecked:r,disabled:g,required:p,onCheckedChange:f,name:s,form:t,value:h,internal_do_not_use_render:({isFormControl:o})=>e.jsxs(e.Fragment,{children:[e.jsx(O,{...a,ref:d,__scopeCheckbox:u}),o&&e.jsx(H,{__scopeCheckbox:u})]})})});$.displayName=F;var Q="CheckboxIndicator",V=l.forwardRef((n,d)=>{const{__scopeCheckbox:u,forceMount:s,...c}=n,r=w(Q,u);return e.jsx(Z,{present:s||v(r.checked)||r.checked===!0,children:e.jsx(I.span,{"data-state":K(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:d,style:{pointerEvents:"none",...n.style}})})});V.displayName=Q;var z="CheckboxBubbleInput",H=l.forwardRef(({__scopeCheckbox:n,...d},u)=>{const{control:s,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:p,required:g,disabled:h,name:f,value:t,form:a,bubbleInput:o,setBubbleInput:b}=w(z,n),j=L(u,b),C=de(r),y=ue(s);l.useEffect(()=>{const x=o;if(!x)return;const P=window.HTMLInputElement.prototype,Y=Object.getOwnPropertyDescriptor(P,"checked").set,U=!c.current;if(C!==r&&Y){const X=new Event("click",{bubbles:U});x.indeterminate=v(r),Y.call(x,v(r)?!1:r),x.dispatchEvent(X)}},[o,C,r,c]);const m=l.useRef(v(r)?!1:r);return e.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??m.current,required:g,disabled:h,name:f,value:t,form:a,...d,tabIndex:-1,ref:j,style:{...d.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});H.displayName=z;function be(n){return typeof n=="function"}function v(n){return n==="indeterminate"}function K(n){return v(n)?"indeterminate":n?"checked":"unchecked"}function fe({className:n,...d}){return e.jsx($,{"data-slot":"checkbox",className:ee("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...d,children:e.jsx(V,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(me,{className:"size-3.5"})})})}function ye({onComplete:n}){const[d,u]=l.useState(!1),[s,c]=l.useState({prn:"",name:"",batch:"",semester:"",academicYear:"",mentorName:"",meetingDate:"",meetingType:"",discussionTopics:[],facultyFeedback:{teachingQuality:"",courseContent:"",communication:"",availability:""},difficulties:"",suggestions:"",personalChallenges:"",careerGoals:"",extracurriculars:"",overallRating:"",additionalComments:""}),r=l.useCallback((t,a)=>{c(o=>({...o,[t]:a}))},[]),p=l.useCallback((t,a,o)=>{c(b=>({...b,[t]:{...b[t],[a]:o}}))},[]),g=l.useCallback((t,a)=>{c(o=>({...o,discussionTopics:a?[...o.discussionTopics,t]:o.discussionTopics.filter(b=>b!==t)}))},[]),h=async t=>{t.preventDefault(),u(!0);try{if(!s.prn||!s.name||!s.batch||!s.semester||!s.academicYear||!s.mentorName||!s.meetingDate||!s.meetingType||!s.facultyFeedback.teachingQuality||!s.facultyFeedback.courseContent||!s.difficulties||!s.suggestions||!s.careerGoals||!s.overallRating)throw new Error("All required fields must be filled");if(s.discussionTopics.length===0)throw new Error("Please select at least one discussion topic");const a=await fetch(`https://${ce}.supabase.co/functions/v1/make-server-84115a1d/mentee/interaction`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${le}`},body:JSON.stringify(s)}),o=await a.json();if(!a.ok)throw new Error(o.error||"Failed to submit form");A.success("Interaction form submitted successfully!"),n(),c({prn:"",name:"",batch:"",semester:"",academicYear:"",mentorName:"",meetingDate:"",meetingType:"",discussionTopics:[],facultyFeedback:{teachingQuality:"",courseContent:"",communication:"",availability:""},difficulties:"",suggestions:"",personalChallenges:"",careerGoals:"",extracurriculars:"",overallRating:"",additionalComments:""})}catch(a){console.error("Form submission error:",a),A.error(a instanceof Error?a.message:"Failed to submit form")}finally{u(!1)}},f=["Academic Performance","Course Selection","Career Planning","Personal Issues","Extracurricular Activities","Study Techniques","Time Management","Stress Management"];return e.jsxs(te,{className:"w-full",children:[e.jsxs(se,{children:[e.jsx(re,{className:"text-blue-900",children:"Mentor-Mentee Interaction Form"}),e.jsx(ae,{className:"text-blue-600",children:"Please provide feedback about your mentoring session and academic experience"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"prn",children:"PRN *"}),e.jsx(k,{id:"prn",placeholder:"Enter your PRN",value:s.prn,onChange:t=>r("prn",t.target.value),required:!0,pattern:"[0-9A-Z]{10,12}",title:"PRN should be 10-12 characters long"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Full Name *"}),e.jsx(k,{id:"name",placeholder:"Enter your full name",value:s.name,onChange:t=>r("name",t.target.value),required:!0,minLength:2})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"batch",children:"Batch *"}),e.jsx(k,{id:"batch",placeholder:"e.g., 2021-2025",value:s.batch,onChange:t=>r("batch",t.target.value),required:!0,pattern:"[0-9]{4}-[0-9]{4}",title:"Batch format should be YYYY-YYYY"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"semester",children:"Current Semester *"}),e.jsxs(D,{value:s.semester,onValueChange:t=>r("semester",t),required:!0,children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select semester"})}),e.jsx(B,{children:[1,2,3,4,5,6,7,8].map(t=>e.jsxs(N,{value:t.toString(),children:["Semester ",t]},t))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"academicYear",children:"Academic Year *"}),e.jsx(k,{id:"academicYear",placeholder:"e.g., 2024-25",value:s.academicYear,onChange:t=>r("academicYear",t.target.value),required:!0,pattern:"[0-9]{4}-[0-9]{2}",title:"Academic year format should be YYYY-YY"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"mentorName",children:"Mentor Name *"}),e.jsx(k,{id:"mentorName",placeholder:"Enter your mentor's name",value:s.mentorName,onChange:t=>r("mentorName",t.target.value),required:!0,minLength:2})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"meetingDate",children:"Meeting Date *"}),e.jsx(k,{id:"meetingDate",type:"date",value:s.meetingDate,onChange:t=>r("meetingDate",t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"meetingType",children:"Meeting Type *"}),e.jsxs(D,{value:s.meetingType,onValueChange:t=>r("meetingType",t),required:!0,children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select meeting type"})}),e.jsxs(B,{children:[e.jsx(N,{value:"in-person",children:"In-Person"}),e.jsx(N,{value:"online",children:"Online"}),e.jsx(N,{value:"phone",children:"Phone Call"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Discussion Topics (Select at least one) *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 p-4 border border-blue-200 rounded-lg bg-blue-50",children:f.map(t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fe,{id:t,checked:s.discussionTopics.includes(t),onCheckedChange:a=>g(t,!!a)}),e.jsx(i,{htmlFor:t,className:"text-sm font-medium text-blue-900 cursor-pointer",children:t})]},t))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Faculty Feedback *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(i,{className:"text-blue-900 font-medium",children:"Teaching Quality *"}),e.jsx(E,{value:s.facultyFeedback.teachingQuality,onValueChange:t=>p("facultyFeedback","teachingQuality",t),className:"mt-3",required:!0,children:["Excellent","Good","Average","Poor"].map(t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{value:t,id:`teaching-${t}`}),e.jsx(i,{htmlFor:`teaching-${t}`,className:"text-blue-900 font-medium cursor-pointer",children:t})]},t))})]}),e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(i,{className:"text-blue-900 font-medium",children:"Course Content *"}),e.jsx(E,{value:s.facultyFeedback.courseContent,onValueChange:t=>p("facultyFeedback","courseContent",t),className:"mt-3",required:!0,children:["Excellent","Good","Average","Poor"].map(t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{value:t,id:`content-${t}`}),e.jsx(i,{htmlFor:`content-${t}`,className:"text-blue-900 font-medium cursor-pointer",children:t})]},t))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"difficulties",children:"Academic Difficulties / Challenges *"}),e.jsx(S,{id:"difficulties",placeholder:"Describe any academic challenges you're facing...",value:s.difficulties,onChange:t=>r("difficulties",t.target.value),rows:3,required:!0,minLength:10})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"suggestions",children:"Suggestions for Improvement *"}),e.jsx(S,{id:"suggestions",placeholder:"Any suggestions for improving teaching methods, course structure, etc...",value:s.suggestions,onChange:t=>r("suggestions",t.target.value),rows:3,required:!0,minLength:10})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"careerGoals",children:"Career Goals & Aspirations *"}),e.jsx(S,{id:"careerGoals",placeholder:"Share your career goals and how your mentor can help...",value:s.careerGoals,onChange:t=>r("careerGoals",t.target.value),rows:3,required:!0,minLength:10})]})]}),e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(i,{className:"text-blue-900 font-medium",children:"Overall Session Rating *"}),e.jsxs(E,{value:s.overallRating,onValueChange:t=>r("overallRating",t),className:"mt-3",required:!0,children:[e.jsx("div",{className:"flex space-x-8",children:[1,2,3,4,5].map(t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{value:t.toString(),id:`rating-${t}`}),e.jsx(i,{htmlFor:`rating-${t}`,className:"text-blue-900 font-medium cursor-pointer",children:t})]},t))}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"1 = Poor, 5 = Excellent"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"additionalComments",children:"Additional Comments"}),e.jsx(S,{id:"additionalComments",placeholder:"Any other feedback or comments...",value:s.additionalComments,onChange:t=>r("additionalComments",t.target.value),rows:3})]}),e.jsx(ie,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Submit Interaction Form"]})})]})})]})}export{ye as InteractionForm};
