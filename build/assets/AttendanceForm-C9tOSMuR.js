import{r as h,j as e,C as S,f as w,g as F,h as C,i as T,L as a,I as d,B as D,k as q,m as A,p as P,l as L,t as p}from"./index-Pm_8r_rA.js";import{S as j,b,c as v,d as N,e as t,T as g}from"./select-8aGA95k4.js";import{R as o,a as i}from"./radio-group-Cb3aPZDp.js";function O({onComplete:f}){const[u,m]=h.useState(!1),[r,x]=h.useState({prn:"",name:"",batch:"",mentorName:"",sessionDate:"",sessionTime:"",sessionDuration:"",sessionType:"",attendanceStatus:"",sessionTopic:"",sessionObjectives:"",participationLevel:"",punctuality:"",preparedness:"",engagementLevel:"",questionsAsked:"",followUpRequired:"",nextSessionPlanned:"",nextSessionDate:"",additionalNotes:""}),n=(s,l)=>{x(c=>({...c,[s]:l}))},y=async s=>{s.preventDefault(),m(!0);try{if(!r.prn||!r.name||!r.batch||!r.mentorName||!r.sessionDate||!r.sessionTime||!r.sessionDuration||!r.sessionType||!r.attendanceStatus||!r.participationLevel||!r.punctuality||!r.preparedness)throw new Error("All required fields must be filled");const l=await fetch(`https://${P}.supabase.co/functions/v1/make-server-84115a1d/mentee/attendance`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(r)}),c=await l.json();if(!l.ok)throw new Error(c.error||"Failed to submit attendance");p.success("Attendance submitted successfully!"),f(),x({prn:"",name:"",batch:"",mentorName:"",sessionDate:"",sessionTime:"",sessionDuration:"",sessionType:"",attendanceStatus:"",sessionTopic:"",sessionObjectives:"",participationLevel:"",punctuality:"",preparedness:"",engagementLevel:"",questionsAsked:"",followUpRequired:"",nextSessionPlanned:"",nextSessionDate:"",additionalNotes:""})}catch(l){console.error("Attendance submission error:",l),p.error(l instanceof Error?l.message:"Failed to submit attendance")}finally{m(!1)}};return e.jsxs(S,{className:"w-full",children:[e.jsxs(w,{children:[e.jsx(F,{className:"text-blue-900",children:"Mentor-Mentee Session Attendance"}),e.jsx(C,{className:"text-blue-600",children:"Record your attendance and participation in mentoring sessions"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"prn",children:"PRN *"}),e.jsx(d,{id:"prn",placeholder:"Enter your PRN",value:r.prn,onChange:s=>n("prn",s.target.value),required:!0,pattern:"[0-9A-Z]{10,12}",title:"PRN should be 10-12 characters long"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Full Name *"}),e.jsx(d,{id:"name",placeholder:"Enter your full name",value:r.name,onChange:s=>n("name",s.target.value),required:!0,minLength:2})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"batch",children:"Batch *"}),e.jsx(d,{id:"batch",placeholder:"e.g., 2021-2025",value:r.batch,onChange:s=>n("batch",s.target.value),required:!0,pattern:"[0-9]{4}-[0-9]{4}",title:"Batch format should be YYYY-YYYY"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"mentorName",children:"Mentor Name *"}),e.jsx(d,{id:"mentorName",placeholder:"Enter your mentor's name",value:r.mentorName,onChange:s=>n("mentorName",s.target.value),required:!0,minLength:2})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"sessionDate",children:"Session Date *"}),e.jsx(d,{id:"sessionDate",type:"date",value:r.sessionDate,onChange:s=>n("sessionDate",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"sessionTime",children:"Session Time *"}),e.jsx(d,{id:"sessionTime",type:"time",value:r.sessionTime,onChange:s=>n("sessionTime",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"sessionDuration",children:"Duration (minutes) *"}),e.jsxs(j,{value:r.sessionDuration,onValueChange:s=>n("sessionDuration",s),required:!0,children:[e.jsx(b,{children:e.jsx(v,{placeholder:"Select duration"})}),e.jsxs(N,{children:[e.jsx(t,{value:"15",children:"15 minutes"}),e.jsx(t,{value:"30",children:"30 minutes"}),e.jsx(t,{value:"45",children:"45 minutes"}),e.jsx(t,{value:"60",children:"1 hour"}),e.jsx(t,{value:"90",children:"1.5 hours"}),e.jsx(t,{value:"120",children:"2 hours"})]})]})]})]}),e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(a,{className:"text-blue-900 font-medium",children:"Session Type *"}),e.jsx(o,{value:r.sessionType,onValueChange:s=>n("sessionType",s),className:"mt-3",required:!0,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"individual",id:"individual",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"individual",className:"text-blue-900 font-medium cursor-pointer",children:"Individual"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"group",id:"group",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"group",className:"text-blue-900 font-medium cursor-pointer",children:"Group"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"online",id:"online",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"online",className:"text-blue-900 font-medium cursor-pointer",children:"Online"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"workshop",id:"workshop",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"workshop",className:"text-blue-900 font-medium cursor-pointer",children:"Workshop"})]})]})})]}),e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(a,{className:"text-blue-900 font-medium",children:"Attendance Status *"}),e.jsx(o,{value:r.attendanceStatus,onValueChange:s=>n("attendanceStatus",s),className:"mt-3",required:!0,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"present",id:"present",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"present",className:"text-blue-900 font-medium cursor-pointer",children:"Present"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"late",id:"late",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"late",className:"text-blue-900 font-medium cursor-pointer",children:"Late"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"absent",id:"absent",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"absent",className:"text-blue-900 font-medium cursor-pointer",children:"Absent"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:"excused",id:"excused",className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:"excused",className:"text-blue-900 font-medium cursor-pointer",children:"Excused"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"sessionTopic",children:"Session Topic/Focus *"}),e.jsx(d,{id:"sessionTopic",placeholder:"Main topic discussed in this session",value:r.sessionTopic,onChange:s=>n("sessionTopic",s.target.value),required:!0,minLength:3})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"sessionObjectives",children:"Session Objectives *"}),e.jsx(g,{id:"sessionObjectives",placeholder:"What were the main objectives or goals of this session?",value:r.sessionObjectives,onChange:s=>n("sessionObjectives",s.target.value),rows:2,required:!0,minLength:10})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Self-Assessment *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(a,{className:"text-blue-900 font-medium",children:"Participation Level *"}),e.jsx(o,{value:r.participationLevel,onValueChange:s=>n("participationLevel",s),className:"mt-3",required:!0,children:["Very Active","Active","Moderate","Passive"].map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:s,id:`participation-${s}`,className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:`participation-${s}`,className:"text-blue-900 font-medium cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(a,{className:"text-blue-900 font-medium",children:"Punctuality *"}),e.jsx(o,{value:r.punctuality,onValueChange:s=>n("punctuality",s),className:"mt-3",required:!0,children:["On Time","5-10 min late","10+ min late","Very Late"].map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:s,id:`punctuality-${s}`,className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:`punctuality-${s}`,className:"text-blue-900 font-medium cursor-pointer",children:s})]},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx(a,{className:"text-blue-900 font-medium",children:"Preparedness for Session *"}),e.jsx(o,{value:r.preparedness,onValueChange:s=>n("preparedness",s),className:"mt-3",required:!0,children:["Well Prepared","Prepared","Somewhat Prepared","Not Prepared"].map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{value:s,id:`prep-${s}`,className:"w-5 h-5 border-2 border-blue-400 text-blue-600"}),e.jsx(a,{htmlFor:`prep-${s}`,className:"text-blue-900 font-medium cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"questionsAsked",children:"Number of Questions Asked"}),e.jsxs(j,{value:r.questionsAsked,onValueChange:s=>n("questionsAsked",s),children:[e.jsx(b,{children:e.jsx(v,{placeholder:"Select number"})}),e.jsxs(N,{children:[e.jsx(t,{value:"0",children:"None"}),e.jsx(t,{value:"1-2",children:"1-2"}),e.jsx(t,{value:"3-5",children:"3-5"}),e.jsx(t,{value:"5+",children:"5+"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Follow-up Required?"}),e.jsx(o,{value:r.followUpRequired,onValueChange:s=>n("followUpRequired",s),children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{value:"yes",id:"followup-yes"}),e.jsx(a,{htmlFor:"followup-yes",children:"Yes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{value:"no",id:"followup-no"}),e.jsx(a,{htmlFor:"followup-no",children:"No"})]})]})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Next Session Planned?"}),e.jsx(o,{value:r.nextSessionPlanned,onValueChange:s=>n("nextSessionPlanned",s),children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{value:"yes",id:"next-yes"}),e.jsx(a,{htmlFor:"next-yes",children:"Yes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{value:"no",id:"next-no"}),e.jsx(a,{htmlFor:"next-no",children:"No"})]})]})})]}),r.nextSessionPlanned==="yes"&&e.jsxs("div",{children:[e.jsx(a,{htmlFor:"nextSessionDate",children:"Next Session Date"}),e.jsx(d,{id:"nextSessionDate",type:"date",value:r.nextSessionDate,onChange:s=>n("nextSessionDate",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"additionalNotes",children:"Additional Notes"}),e.jsx(g,{id:"additionalNotes",placeholder:"Any additional comments about the session...",value:r.additionalNotes,onChange:s=>n("additionalNotes",s.target.value),rows:3})]}),e.jsx(D,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Submit Attendance"]})})]})})]})}export{O as AttendanceForm};
